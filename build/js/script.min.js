new Swiper(".model__image-container",{pagination:{el:".model__pagination",type:"bullets",clickable:!0},loop:!0}),function(){const e=document.querySelectorAll(".device__wire-dote span"),t=document.querySelectorAll(".device__wire-popup-mobile"),n=document.querySelectorAll(".device__wire-popup-close"),s=document.querySelector(".device__wire-popup-overlay");e.forEach((e,n)=>{e.addEventListener("click",()=>{t[n].classList.add("js--show"),s.classList.add("js--show")})}),n.forEach((e,n)=>{e.addEventListener("click",()=>{t[n].classList.remove("js--show"),s.classList.remove("js--show")})}),s.addEventListener("click",()=>{t.forEach(e=>{e.classList.contains("js--show")&&e.classList.remove("js--show")}),s.classList.remove("js--show")})}(),document.getElementById("animation")&&lottie.loadAnimation({container:document.getElementById("animation"),renderer:"svg",loop:!0,autoplay:!0,path:"data.json"}),function(){var e="https://split.daichicloud.ru/brands/all",t="GET",n=200,s=300,o=function(e,t){var o=new XMLHttpRequest;return o.timeout=1e4,o.responseType="json",o.addEventListener("load",(function(){!function(e){return e.status<n||e.status>s}(o)?e(o.response):t("Данные не загрузились. Причина: "+o.status+" "+o.statusText)})),o.addEventListener("error",(function(){t("Произошла ошибка соединения")})),o.addEventListener("timeout",(function(){t("Запрос не успел выполниться за "+o.timeout+"мс")})),o},i=function(e){e.remove()},a=function(e){var t=document.createElement("div");t.style="z-index: 100; margin: 0 auto; text-align: center; background-color: red;",t.style.position="absolute",t.style.left=0,t.style.right=0,t.style.fontSize="30px",t.textContent=e,document.body.insertAdjacentElement("afterbegin",t),window.setTimeout(i,2e3,t)};window.backend={load:function(n,s){var i=o(n,s||a);i.open(t,e),i.send()}}}(),jQuery,function(){const e=document.querySelector(".model-choice__brand-list"),t=document.querySelector(".model-choice__brand-choice");if(!e)return;t.addEventListener("click",()=>{if(!e.classList.contains("show"))return e.classList.add("show"),void t.classList.add("opened");e.classList.contains("show")&&(e.classList.remove("show"),t.classList.remove("opened"))}),document.addEventListener("mousedown",n=>{let s=n.target;s.classList.contains("model-choice__brand-choice")||s.classList.contains("model-choice__brand-item")||s.classList.contains("model-choice__brand-list")||!e.classList.contains("show")||(e.classList.remove("show"),t.classList.remove("opened"))})}(),function(){const e=document.querySelector(".equipment__wrapper"),t=document.querySelector(".equipment__container");if(!e)return;(()=>{let n=document.createDocumentFragment(),s=e.cloneNode(!0);s.className="equipment__slide-wrapper",s.classList.add("swiper-wrapper");let o=document.createElement("div");o.classList.add("equipment__pagination"),o.classList.add("swiper-pagination"),n.appendChild(s),n.appendChild(o),t.appendChild(n),t.querySelectorAll(".equipment__item").forEach(e=>{e.classList.add("swiper-slide")}),new Swiper(".equipment__container",{pagination:{el:".equipment__pagination",type:"bullets"},loop:!0})})()}(),function(){const e=document.querySelector(".process__wrapper"),t=document.querySelector(".process__container");if(!e)return;(()=>{let n=document.createDocumentFragment(),s=e.cloneNode(!0);s.className="process__slide-wrapper",s.classList.add("swiper-wrapper");let o=document.createElement("div");o.classList.add("process__pagination"),o.classList.add("swiper-pagination");let i=document.createElement("div");i.className="process__number",i.textContent=1,n.appendChild(s),n.appendChild(o),n.appendChild(i),t.appendChild(n),t.querySelectorAll(".process__item").forEach(e=>{e.classList.add("swiper-slide")});(e=>{const n=t.querySelector(".process__number");e.on("slideChange",()=>{n.textContent=e.realIndex+1})})(new Swiper(".process__container",{pagination:{el:".process__pagination",type:"bullets"},loop:!0}))})()}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGVsLmpzIiwicG9wdXAuanMiLCJhbmltYXRpb24uanMiLCJiYWNrZW5kLmpzIiwic2VsZWN0LmpzIiwiY2hvaWNlLmpzIiwiZXF1aXBtZW50LmpzIiwicHJvY2Vzcy5qcyJdLCJuYW1lcyI6WyJTd2lwZXIiLCJwYWdpbmF0aW9uIiwiZWwiLCJ0eXBlIiwiY2xpY2thYmxlIiwibG9vcCIsIndpcmVCdXR0b25zIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwicG9wdXBzIiwiY2xvc2VCdXR0b25zIiwib3ZlcmxheSIsInF1ZXJ5U2VsZWN0b3IiLCJmb3JFYWNoIiwid2lyZUJ1dHRvbiIsImlkeCIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJhZGQiLCJjbG9zZUJ1dHRvbiIsInJlbW92ZSIsInBvcHVwIiwiY29udGFpbnMiLCJnZXRFbGVtZW50QnlJZCIsImxvdHRpZSIsImxvYWRBbmltYXRpb24iLCJjb250YWluZXIiLCJyZW5kZXJlciIsImF1dG9wbGF5IiwicGF0aCIsIlJlcVVybCIsIlJlcU1ldGhvZCIsIlJlcVN0YXR1cyIsImNyZWF0ZVJlcXVlc3QiLCJvbkxvYWQiLCJvbkVycm9yIiwieGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJ0aW1lb3V0IiwicmVzcG9uc2VUeXBlIiwic3RhdHVzIiwiaXNFcnJvclN0YXR1cyIsInJlc3BvbnNlIiwic3RhdHVzVGV4dCIsInJlbW92ZUVsZW1lbnQiLCJlbGVtZW50Iiwib25BbnlFcnJvciIsIm1lc3NhZ2UiLCJub2RlIiwiY3JlYXRlRWxlbWVudCIsInN0eWxlIiwicG9zaXRpb24iLCJsZWZ0IiwicmlnaHQiLCJmb250U2l6ZSIsInRleHRDb250ZW50IiwiYm9keSIsImluc2VydEFkamFjZW50RWxlbWVudCIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJiYWNrZW5kIiwibG9hZCIsInJlcSIsIm9wZW4iLCJzZW5kIiwialF1ZXJ5IiwiYnJhbmRMaXN0IiwiYnJhbmRCdXR0b24iLCJldnQiLCJ0YXJnZXQiLCJ3cmFwcGVyIiwiZnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50Iiwid3JhcHBlck5vZGUiLCJjbG9uZU5vZGUiLCJjbGFzc05hbWUiLCJwYWdpbmF0aW9uTm9kZSIsImFwcGVuZENoaWxkIiwiaXRlbSIsInJlbmRlclNsaWRlciIsIm51bWJlck5vZGUiLCJzd2lwZXIiLCJudW1iZXJGaWVsZCIsIm9uIiwicmVhbEluZGV4IiwiYWRkTnVtYmVyaW5nIl0sIm1hcHBpbmdzIjoiQUFFQSxJQUFBQSxPQUFBLDBCQUFBLENBQ0FDLFdBQUEsQ0FDQUMsR0FBQSxxQkFDQUMsS0FBQSxVQUNBQyxXQUFBLEdBRUFDLE1BQUEsSUNSQSxXQUNBLE1BQUFDLEVBQUFDLFNBQUFDLGlCQUFBLDJCQUNBQyxFQUFBRixTQUFBQyxpQkFBQSw4QkFDQUUsRUFBQUgsU0FBQUMsaUJBQUEsNkJBQ0FHLEVBQUFKLFNBQUFLLGNBQUEsK0JBVUFOLEVBQUFPLFFBQUEsQ0FBQUMsRUFBQUMsS0FDQUQsRUFBQUUsaUJBQUEsUUFBQSxLQUNBUCxFQUFBTSxHQUFBRSxVQUFBQyxJQUFBLFlBQ0FQLEVBQUFNLFVBQUFDLElBQUEsZ0JBSUFSLEVBQUFHLFFBQUEsQ0FBQU0sRUFBQUosS0FDQUksRUFBQUgsaUJBQUEsUUFBQSxLQUNBUCxFQUFBTSxHQUFBRSxVQUFBRyxPQUFBLFlBQ0FULEVBQUFNLFVBQUFHLE9BQUEsZ0JBSUFULEVBQUFLLGlCQUFBLFFBQUEsS0FyQkFQLEVBQUFJLFFBQUFRLElBQ0FBLEVBQUFKLFVBQUFLLFNBQUEsYUFDQUQsRUFBQUosVUFBQUcsT0FBQSxjQXFCQVQsRUFBQU0sVUFBQUcsT0FBQSxjQTlCQSxHQ0NBYixTQUFBZ0IsZUFBQSxjQUlBQyxPQUFBQyxjQUFBLENBQ0FDLFVBQUFuQixTQUFBZ0IsZUFBQSxhQUNBSSxTQUFBLE1BQ0F0QixNQUFBLEVBQ0F1QixVQUFBLEVBQ0FDLEtBQUEsY0NSQSxXQUNBLElBQUFDLEVBQ0EsMENBSUFDLEVBQ0EsTUFJQUMsRUFDQSxJQURBQSxF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RCxFQUFBRSxVQUFBLHlCQUNBRixFQUFBeEQsVUFBQUMsSUFBQSxrQkFFQSxJQUFBMEQsRUFBQXJFLFNBQUEwQyxjQUFBLE9BQ0EyQixFQUFBM0QsVUFBQUMsSUFBQSx1QkFDQTBELEVBQUEzRCxVQUFBQyxJQUFBLHFCQUVBLElBQUE4RCxFQUFBekUsU0FBQTBDLGNBQUEsT0FDQStCLEVBQUFMLFVBQUEsa0JBQ0FLLEVBQUF6QixZQUFBLEVBRUFnQixFQUFBTSxZQUFBSixHQUNBRixFQUFBTSxZQUFBRCxHQUNBTCxFQUFBTSxZQUFBRyxHQUVBdEQsRUFBQW1ELFlBQUFOLEdBQ0E3QyxFQWxDQWxCLGlCQUFBLGtCQUNBSyxRQUFBaUUsSUFDQUEsRUFBQTdELFVBQUFDLElBQUEsa0JBSUEsQ0FBQStELElBQ0EsTUFBQUMsRUFBQXhELEVBQUFkLGNBQUEsb0JBRUFxRSxFQUFBRSxHQUFBLGNBQUEsS0FDQUQsRUFBQTNCLFlBQUEwQixFQUFBRyxVQUFBLEtBMkJBQyxDQS9DQSxJQUFBckYsT0FBQSxzQkFBQSxDQUNBQyxXQUFBLENBQ0FDLEdBQUEsdUJBQ0FDLEtBQUEsV0FFQUUsTUFBQSxNQTZDQTBFLEdBM0RBIiwiZmlsZSI6InNjcmlwdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xuICBjb25zdCBpbml0U3dpcGVyID0gKCkgPT4ge1xuICAgIHJldHVybiBuZXcgU3dpcGVyKCcubW9kZWxfX2ltYWdlLWNvbnRhaW5lcicsIHtcbiAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgZWw6ICcubW9kZWxfX3BhZ2luYXRpb24nLFxuICAgICAgICB0eXBlOiAnYnVsbGV0cycsXG4gICAgICAgIGNsaWNrYWJsZTogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICBsb29wOiB0cnVlLFxuICAgIH0pO1xuICB9O1xuXG4gIGluaXRTd2lwZXIoKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICBjb25zdCB3aXJlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kZXZpY2VfX3dpcmUtZG90ZSBzcGFuJyk7XG4gIGNvbnN0IHBvcHVwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kZXZpY2VfX3dpcmUtcG9wdXAtbW9iaWxlJyk7XG4gIGNvbnN0IGNsb3NlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kZXZpY2VfX3dpcmUtcG9wdXAtY2xvc2UnKTtcbiAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZXZpY2VfX3dpcmUtcG9wdXAtb3ZlcmxheScpO1xuXG4gIGNvbnN0IGNsb3NlQW55UG9wdXAgPSAoKSA9PiB7XG4gICAgcG9wdXBzLmZvckVhY2goKHBvcHVwKSA9PiB7XG4gICAgICBpZiAocG9wdXAuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy0tc2hvdycpKSB7XG4gICAgICAgIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ2pzLS1zaG93Jyk7XG4gICAgICB9XG4gICAgfSlcbiAgfTtcblxuICB3aXJlQnV0dG9ucy5mb3JFYWNoKCh3aXJlQnV0dG9uLCBpZHgpID0+IHtcbiAgICB3aXJlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgcG9wdXBzW2lkeF0uY2xhc3NMaXN0LmFkZCgnanMtLXNob3cnKTtcbiAgICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnanMtLXNob3cnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgY2xvc2VCdXR0b25zLmZvckVhY2goKGNsb3NlQnV0dG9uLCBpZHgpID0+IHtcbiAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHBvcHVwc1tpZHhdLmNsYXNzTGlzdC5yZW1vdmUoJ2pzLS1zaG93Jyk7XG4gICAgICBvdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ2pzLS1zaG93Jyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIG92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgY2xvc2VBbnlQb3B1cCgpO1xuICAgIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnanMtLXNob3cnKTtcbiAgfSk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgaWYgKCFkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW5pbWF0aW9uJykpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBsb3R0aWUubG9hZEFuaW1hdGlvbih7XG4gICAgY29udGFpbmVyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYW5pbWF0aW9uJyksIC8vIHRoZSBkb20gZWxlbWVudCB0aGF0IHdpbGwgY29udGFpbiB0aGUgYW5pbWF0aW9uXG4gICAgcmVuZGVyZXI6ICdzdmcnLFxuICAgIGxvb3A6IHRydWUsXG4gICAgYXV0b3BsYXk6IHRydWUsXG4gICAgcGF0aDogJ2RhdGEuanNvbicgLy8gdGhlIHBhdGggdG8gdGhlIGFuaW1hdGlvbiBqc29uXG4gIH0pO1xufSkoKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuKGZ1bmN0aW9uICgpIHtcbiAgdmFyIFJlcVVybCA9IHtcbiAgICBHRVQ6ICdodHRwczovL3NwbGl0LmRhaWNoaWNsb3VkLnJ1L2JyYW5kcy9hbGwnLFxuICAgIC8vUE9TVDogJ2h0dHBzOi8vanMuZHVtcC5hY2FkZW15L2tla3N0YWdyYW0nXG4gIH07XG5cbiAgdmFyIFJlcU1ldGhvZCA9IHtcbiAgICBHRVQ6ICdHRVQnLFxuICAgIFBPU1Q6ICdQT1NUJ1xuICB9O1xuXG4gIHZhciBSZXFTdGF0dXMgPSB7XG4gICAgT0s6IDIwMCxcbiAgICBNVUxUSVBMRV9DSE9JQ0VTOiAzMDAsXG4gIH07XG5cbiAgdmFyIFRJTUVPVVQgPSAxMDAwMDtcblxuICB2YXIgaXNFcnJvclN0YXR1cyA9IGZ1bmN0aW9uICh4aHIpIHtcbiAgICByZXR1cm4geGhyLnN0YXR1cyA8IFJlcVN0YXR1cy5PS1xuICAgICAgfHwgeGhyLnN0YXR1cyA+IFJlcVN0YXR1cy5NVUxUSVBMRV9DSE9JQ0VTO1xuICB9O1xuXG4gIHZhciBjcmVhdGVSZXF1ZXN0ID0gZnVuY3Rpb24gKG9uTG9hZCwgb25FcnJvcikge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgIHhoci50aW1lb3V0ID0gVElNRU9VVDtcbiAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuXG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoaXNFcnJvclN0YXR1cyh4aHIpKSB7XG4gICAgICAgIG9uRXJyb3IoJ9CU0LDQvdC90YvQtSDQvdC1INC30LDQs9GA0YPQt9C40LvQuNGB0YwuINCf0YDQuNGH0LjQvdCwOiAnICsgeGhyLnN0YXR1cyArICcgJyArIHhoci5zdGF0dXNUZXh0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBvbkxvYWQoeGhyLnJlc3BvbnNlKTtcbiAgICB9KTtcblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgIG9uRXJyb3IoJ9Cf0YDQvtC40LfQvtGI0LvQsCDQvtGI0LjQsdC60LAg0YHQvtC10LTQuNC90LXQvdC40Y8nKTtcbiAgICB9KTtcblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCd0aW1lb3V0JywgZnVuY3Rpb24gKCkge1xuICAgICAgb25FcnJvcign0JfQsNC/0YDQvtGBINC90LUg0YPRgdC/0LXQuyDQstGL0L/QvtC70L3QuNGC0YzRgdGPINC30LAgJyArIHhoci50aW1lb3V0ICsgJ9C80YEnKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB4aHI7XG4gIH07XG5cbiAgdmFyIHJlbW92ZUVsZW1lbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gIH07XG5cbiAgdmFyIG9uQW55RXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbm9kZS5zdHlsZSA9ICd6LWluZGV4OiAxMDA7IG1hcmdpbjogMCBhdXRvOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGJhY2tncm91bmQtY29sb3I6IHJlZDsnO1xuICAgIG5vZGUuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgIG5vZGUuc3R5bGUubGVmdCA9IDA7XG4gICAgbm9kZS5zdHlsZS5yaWdodCA9IDA7XG4gICAgbm9kZS5zdHlsZS5mb250U2l6ZSA9ICczMHB4JztcblxuICAgIG5vZGUudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmJlZ2luJywgbm9kZSk7XG4gICAgd2luZG93LnNldFRpbWVvdXQocmVtb3ZlRWxlbWVudCwgMjAwMCwgbm9kZSk7XG4gIH07XG5cbiAgd2luZG93LmJhY2tlbmQgPSB7XG4gICAgbG9hZDogZnVuY3Rpb24gKG9uTG9hZCwgb25FcnJvcikge1xuICAgICAgdmFyIHJlcSA9IGNyZWF0ZVJlcXVlc3Qob25Mb2FkLCBvbkVycm9yIHx8IG9uQW55RXJyb3IpO1xuICAgICAgcmVxLm9wZW4oUmVxTWV0aG9kLkdFVCwgUmVxVXJsLkdFVCk7XG4gICAgICByZXEuc2VuZCgpO1xuICAgIH0sXG5cbiAgICAvLyBzYXZlOiBmdW5jdGlvbiAoZGF0YSwgb25Mb2FkLCBvbkVycm9yKSB7XG4gICAgLy8gICB2YXIgcmVxID0gY3JlYXRlUmVxdWVzdChvbkxvYWQsIG9uRXJyb3IpO1xuICAgIC8vICAgcmVxLm9wZW4oUmVxTWV0aG9kLlBPU1QsIFJlcVVybC5QT1NUKTtcbiAgICAvLyAgIHJlcS5zZW5kKGRhdGEpO1xuICAgIC8vIH1cbiAgfTtcbn0pKCk7XG5cblxuXG5cbiIsIi8vICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuLy8gICAvLyAkKCcubW9kZWwtY2hvaWNlX19icmFuZC1zZWxlY3QnKS5zZWxlY3QyKHtcbi8vICAgLy8gICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogLTEsXG4vLyAgIC8vIH0pO1xuXG4vLyAgIC8vICQoJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy1zZWxlY3QnKS5zZWxlY3QyKHtcbi8vICAgLy8gICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogLTEsXG4vLyAgIC8vIH0pO1xuXG4vLyAgIGZ1bmN0aW9uIG1ha2VTZWxlY3QoZWxlbWVudCkge1xuLy8gICAgICQoZWxlbWVudCkuc2VsZWN0Mih7XG4vLyAgICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogLTEsXG4vLyAgICAgfSk7XG4vLyAgIH07XG5cblxuXG5cbi8vICAgd2luZG93Lm1ha2VTZWxlY3QgPSBtYWtlU2VsZWN0O1xuXG4vLyAgIGNvbnNvbGUubG9nKHdpbmRvdy5tYWtlU2VsZWN0KTtcblxuLy8gfSk7XG5cblxuKGZ1bmN0aW9uKCQpIHtcbiAgLy8gZnVuY3Rpb24gbWFrZVNlbGVjdChlbGVtZW50Q2xhc3MpIHtcbiAgLy8gICAkKGVsZW1lbnRDbGFzcykuc2VsZWN0Mih7XG4gIC8vICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogLTEsXG4gIC8vICAgfSk7XG4gIC8vIH07XG5cbiAgLy8gd2luZG93Lm1ha2VTZWxlY3QgPSBtYWtlU2VsZWN0O1xufSkoalF1ZXJ5KTtcbiIsIihmdW5jdGlvbiAoKSB7XG4gIC8vIGNvbnN0IHNwbGl0cyA9IFtcbiAgLy8gICB7XG4gIC8vICAgICBcImlkXCI6NyxcbiAgLy8gICAgIFwidGl0bGVcIjpcIkF4aW9tYVwiLFxuICAvLyAgICAgXCJzZXJpZXNcIjpbXG4gIC8vICAgICAgIHtcbiAgLy8gICAgICAgICBcImlkXCI6NjMsXG4gIC8vICAgICAgICAgXCJ0aXRsZVwiOlwiQVNYX0FcIlxuICAvLyAgICAgICB9LFxuICAvLyAgICAgICB7XG4gIC8vICAgICAgICAgXCJpZFwiOjYyLFxuICAvLyAgICAgICAgIFwidGl0bGVcIjpcIkFTWF9BWlwiXG4gIC8vICAgICAgIH1cbiAgLy8gICAgIF1cbiAgLy8gICB9LFxuICAvLyAgIHtcImlkXCI6NixcInRpdGxlXCI6XCJEYWljaGlcIixcInNlcmllc1wiOlt7XCJpZFwiOjQ1LFwidGl0bGVcIjpcIkNhcmJvbiBEQV9EVlFcIn0se1wiaWRcIjo0NixcInRpdGxlXCI6XCJFdmVyZXN0IERBX0VWUVwifSx7XCJpZFwiOjQzLFwidGl0bGVcIjpcIlBlYWsgREFfQVZRU1wifSx7XCJpZFwiOjQyLFwidGl0bGVcIjpcIlgtdHJlbWUgUGVhayBEQV9BVlFTXCJ9XX0sXG4gIC8vICAge1wiaWRcIjoxLFwidGl0bGVcIjpcIkRhaWtpblwiLFwic2VyaWVzXCI6W3tcImlkXCI6MTEsXCJ0aXRsZVwiOlwiQ29tZm9yYSBGVFgtSlxcL0dWXCJ9LHtcImlkXCI6MjYsXCJ0aXRsZVwiOlwiQ29tZm9yYSBGVFhQLUszXCJ9LHtcImlkXCI6MjcsXCJ0aXRsZVwiOlwiQ29tZm9yYSBGVFhQLUxcIn0se1wiaWRcIjoyOCxcInRpdGxlXCI6XCJDb21mb3JhIEZUWFAtTVwifSx7XCJpZFwiOjIzLFwidGl0bGVcIjpcIkVtdXJhIEZUWEctTFwifSx7XCJpZFwiOjE4LFwidGl0bGVcIjpcIkVtdXJhIEZUWEotTVwifSx7XCJpZFwiOjIwLFwidGl0bGVcIjpcIkZMWFMtQlwifSx7XCJpZFwiOjE2LFwidGl0bGVcIjpcIkZUWEItQlwifSx7XCJpZFwiOjY1LFwidGl0bGVcIjpcIkZUWFMtRVwifSx7XCJpZFwiOjY0LFwidGl0bGVcIjpcIkZUWFMtSlxcL0dcIn0se1wiaWRcIjoyMSxcInRpdGxlXCI6XCJGVlhNLUZcIn0se1wiaWRcIjoyMixcInRpdGxlXCI6XCJGVlhTLUZcIn0se1wiaWRcIjoxOSxcInRpdGxlXCI6XCJOZXh1cmEgRlZYRy1LXCJ9LHtcImlkXCI6MjQsXCJ0aXRsZVwiOlwiUGVyZmVyYSBGVFhNLU5cIn0se1wiaWRcIjoyNSxcInRpdGxlXCI6XCJQZXJmZXJhIEZUWFMtS1wifSx7XCJpZFwiOjEsXCJ0aXRsZVwiOlwiU2Vuc2lyYSBGVFhCLUNcIn1dfSxcbiAgLy8gICB7XCJpZFwiOjIsXCJ0aXRsZVwiOlwiS2VudGF0c3VcIixcInNlcmllc1wiOlt7XCJpZFwiOjQ5LFwidGl0bGVcIjpcIkJyYXZvICBLU0dCX0hGQU5cIn0se1wiaWRcIjo1MCxcInRpdGxlXCI6XCJCcmF2byAgS1NHQkFfSFpBTlwifSx7XCJpZFwiOjU2LFwidGl0bGVcIjpcIktNR0JBX0haQU5cIn0se1wiaWRcIjo1NyxcInRpdGxlXCI6XCJLTUdCQl9IWkFOXCJ9LHtcImlkXCI6NTIsXCJ0aXRsZVwiOlwiVGVhbSAgS1NHVF9IWkFOXCJ9LHtcImlkXCI6NDcsXCJ0aXRsZVwiOlwiVGl0YW4gR2VuZXNpcyBLU0dYXCJ9LHtcImlkXCI6NTEsXCJ0aXRsZVwiOlwiVHVyaW4gS1NHVV9IWkFOXCJ9XX0sXG4gIC8vICAge1wiaWRcIjo4LFwidGl0bGVcIjpcIk1pZGVhXCIsXCJzZXJpZXNcIjpbe1wiaWRcIjo2MSxcInRpdGxlXCI6XCJCbGFuYyBNU01BXCJ9LHtcImlkXCI6NjAsXCJ0aXRsZVwiOlwiQmxhbmMgTVNNQSBFUlAgKE1BKVwifSx7XCJpZFwiOjU5LFwidGl0bGVcIjpcIk1pc3Npb24gTVNNQiAoTUIpXCJ9LHtcImlkXCI6NTgsXCJ0aXRsZVwiOlwiVWx0aW1hdGUgQ29tZm9ydCBNU01UIChNVClcIn1dfV07XG5cblxuICAvL2xldCBzZXJpZXNOYW1lID0gJyc7XG4gIC8vbGV0IGJyYW5kTmFtZSA9ICcnO1xuXG4gIGNvbnN0IGJyYW5kTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlbC1jaG9pY2VfX2JyYW5kLWxpc3QnKTtcbiAgY29uc3QgYnJhbmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kZWwtY2hvaWNlX19icmFuZC1jaG9pY2UnKTtcbiAgLy9jb25zdCBicmFuZFNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlbC1jaG9pY2VfX3NlbGVjdC1icmFuZCcpO1xuXG4gIGlmICghYnJhbmRMaXN0KSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy9sZXQgY3VycmVudEJyYW5kSWR4ID0gLTE7XG4gIC8vbGV0IGN1cnJlbnRPcHRpb25JZHggPSAtMTtcblxuICAvL2NvbnN0IGJyYW5kU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGVsLWNob2ljZV9fYnJhbmQtc2VsZWN0Jyk7XG4gIC8vY29uc3Qgc2VyaWVzV3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy13cmFwcGVyJyk7XG4gIC8vY29uc3Qgc2VyaWVzVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2VyaWVzJykuY29udGVudC5xdWVyeVNlbGVjdG9yKCcubW9kZWwtY2hvaWNlX19zZXJpZXMtc2VsZWN0Jyk7XG5cbiAgLy9jb25zdCBsaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGVsLWNob2ljZV9fbGluaycpO1xuXG4gIC8vIGNvbnN0IGdldEhyZWYgPSAoc2VyaWVzKSA9PiB7XG4gIC8vICAgbGV0IGhyZWYgPSAnJztcblxuICAvLyAgIFBBR0VTLmZvckVhY2goKHBhZ2UpID0+IHtcbiAgLy8gICAgIGlmIChocmVmID09PSAnJykge1xuICAvLyAgICAgICBpZiAoc2VyaWVzLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihwYWdlKSAhPT0gLTEpIHtcbiAgLy8gICAgICAgICBocmVmID0gcGFnZTtcbiAgLy8gICAgICAgfVxuICAvLyAgICAgfVxuICAvLyAgIH0pO1xuXG4gIC8vICAgcmV0dXJuIGhyZWYgPT09ICcnID8gJycgOiBocmVmICsgJy5odG1sJztcbiAgLy8gfTtcblxuICBjb25zdCBvbkJyYW5kQ2xpY2sgPSAoKSA9PiB7XG4gICAgaWYgKCFicmFuZExpc3QuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93JykpIHtcbiAgICAgIGJyYW5kTGlzdC5jbGFzc0xpc3QuYWRkKCdzaG93Jyk7XG4gICAgICBicmFuZEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdvcGVuZWQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoYnJhbmRMaXN0LmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpKSB7XG4gICAgICBicmFuZExpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgICAgYnJhbmRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkJyk7XG4gICAgfVxuICAgIC8vIGpRdWVyeSgnLm1vZGVsLWNob2ljZV9fYnJhbmQtbGlzdCcpLm1DdXN0b21TY3JvbGxiYXIoe1xuICAgIC8vICAgc2V0SGVpZ2h0OiAxODksXG4gICAgLy8gICBhdXRvSGlkZVNjcm9sbGJhcjogZmFsc2UsXG4gICAgLy8gICB0aGVtZTogJ2RhcmsnLFxuICAgIC8vICAgbW91c2VXaGVlbFBpeGVsczogMjAwLFxuICAgIC8vICAgY29udGVudFRvdWNoU2Nyb2xsOiB0cnVlXG4gICAgLy8gfSk7XG4gIH07XG5cbiAgLy8gY29uc3Qgb25TZXJpZXNDbGljayA9ICgpID0+IHtcbiAgLy8gICBpZiAoIXNlcmllc0xpc3QuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaG93JykpIHtcbiAgLy8gICAgIHNlcmllc0xpc3QuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuICAvLyAgICAgc2VyaWVzQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ29wZW5lZCcpO1xuICAvLyAgICAgLy8gY29uc29sZS5sb2coc2VyaWVzTGlzdC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gLSB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICAvLyAgICAgcmV0dXJuO1xuICAvLyAgIH1cblxuICAvLyAgIGlmIChzZXJpZXNMaXN0LmNsYXNzTGlzdC5jb250YWlucygnc2hvdycpKSB7XG4gIC8vICAgICBzZXJpZXNMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgLy8gICAgIHNlcmllc0J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuZWQnKTtcbiAgLy8gICB9XG4gIC8vIH07XG5cbiAgY29uc3Qgb25PdXRzaWRlQ2xpY2sgPSAoZXZ0KSA9PiB7XG4gICAgbGV0IHRhcmdldCA9IGV2dC50YXJnZXQ7XG5cbiAgICBpZiAoXG4gICAgICAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kZWwtY2hvaWNlX19icmFuZC1jaG9pY2UnKVxuICAgICAgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGVsLWNob2ljZV9fYnJhbmQtaXRlbScpXG4gICAgICAmJiAhdGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kZWwtY2hvaWNlX19icmFuZC1saXN0JylcbiAgICAgICYmIGJyYW5kTGlzdC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKVxuICAgICkge1xuICAgICAgYnJhbmRMaXN0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICAgIGJyYW5kQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW5lZCcpO1xuICAgIH1cblxuICAgIC8vIGlmIChcbiAgICAvLyAgICF0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RlbC1jaG9pY2VfX3Nlcmllcy1jaG9pY2UnKVxuICAgIC8vICAgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGVsLWNob2ljZV9fc2VyaWVzLWl0ZW0nKVxuICAgIC8vICAgJiYgIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGVsLWNob2ljZV9fc2VyaWVzLWxpc3QnKVxuICAgIC8vICAgJiYgc2VyaWVzTGlzdC5jbGFzc0xpc3QuY29udGFpbnMoJ3Nob3cnKVxuICAgIC8vICkge1xuICAgIC8vICAgc2VyaWVzTGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgLy8gICBzZXJpZXNCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkJyk7XG4gICAgLy8gfVxuICB9O1xuXG5cbiAgICAvLyBsZXQgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgLy8gbGV0IGkgPSAwO1xuXG4gICAgLy8gYXJyLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAvLyAgIGxldCBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAvLyAgIG5vZGUudGV4dENvbnRlbnQgPSBpdGVtWyd0aXRsZSddO1xuICAgIC8vICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdtb2RlbC1jaG9pY2VfX2JyYW5kLWl0ZW0nKTtcbiAgICAvLyAgIG5vZGUuc2V0QXR0cmlidXRlKCdkYXRhLWlkJywgaSk7XG4gICAgLy8gICBpKys7XG4gICAgLy8gICBmcmFnbWVudC5hcHBlbmRDaGlsZChub2RlKTtcblxuICAgIC8vICAgLy8gbGV0IHNlcmllc1NlbGVjdCA9IHNlcmllc1RlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcbiAgICAvLyAgIC8vIHNlcmllc1NlbGVjdC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAvLyAgIC8vIHNlcmllc1NlbGVjdC5zZXRBdHRyaWJ1dGUoJ25hbWUnLCBpdGVtWyd0aXRsZSddKTtcblxuICAgIC8vICAgLy8gaXRlbS5zZXJpZXMuZm9yRWFjaCgoc2VyaWUpID0+IHtcbiAgICAvLyAgIC8vICAgbGV0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAvLyAgIC8vICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgc2VyaWVbJ3RpdGxlJ10pO1xuICAgIC8vICAgLy8gICBub2RlLnRleHRDb250ZW50ID0gc2VyaWVbJ3RpdGxlJ107XG4gICAgLy8gICAvLyAgIHNlcmllc1NlbGVjdC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAvLyAgIC8vIH0pO1xuXG4gICAgLy8gICAvLyBzZXJpZXNXcmFwcGVyLmFwcGVuZENoaWxkKHNlcmllc1NlbGVjdCk7XG4gICAgLy8gfSk7XG5cbiAgICAvLyBicmFuZExpc3QuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuXG5cbiAgICAvLyBsZXQgZnJhZ21lbnQxID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIC8vIGxldCBqID0gMDtcblxuICAgIC8vIGFyci5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgLy8gICBsZXQgbm9kZTEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAvLyAgIG5vZGUxLnRleHRDb250ZW50ID0gaXRlbVsndGl0bGUnXTtcbiAgICAvLyAgIG5vZGUxLmNsYXNzTGlzdC5hZGQoJ21vZGVsLWNob2ljZV9fYnJhbmQtb3B0aW9uJyk7XG4gICAgLy8gICBub2RlMS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCBpKTtcbiAgICAvLyAgIGorKztcbiAgICAvLyAgIGZyYWdtZW50MS5hcHBlbmRDaGlsZChub2RlMSk7XG5cbiAgICAvLyAgIC8vIGxldCBzZXJpZXNTZWxlY3QgPSBzZXJpZXNUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgLy8gICAvLyBzZXJpZXNTZWxlY3QuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgLy8gICAvLyBzZXJpZXNTZWxlY3Quc2V0QXR0cmlidXRlKCduYW1lJywgaXRlbVsndGl0bGUnXSk7XG5cbiAgICAvLyAgIC8vIGl0ZW0uc2VyaWVzLmZvckVhY2goKHNlcmllKSA9PiB7XG4gICAgLy8gICAvLyAgIGxldCBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgLy8gICAvLyAgIG5vZGUuc2V0QXR0cmlidXRlKCd2YWx1ZScsIHNlcmllWyd0aXRsZSddKTtcbiAgICAvLyAgIC8vICAgbm9kZS50ZXh0Q29udGVudCA9IHNlcmllWyd0aXRsZSddO1xuICAgIC8vICAgLy8gICBzZXJpZXNTZWxlY3QuYXBwZW5kQ2hpbGQobm9kZSk7XG4gICAgLy8gICAvLyB9KTtcblxuICAgIC8vICAgLy8gc2VyaWVzV3JhcHBlci5hcHBlbmRDaGlsZChzZXJpZXNTZWxlY3QpO1xuICAgIC8vIH0pO1xuXG4gICAgLy8gYnJhbmRTZWxlY3QuYXBwZW5kQ2hpbGQoZnJhZ21lbnQxKTtcblxuXG5cbiAgICAvLyBjb25zdCBvbkJyYW5kSXRlbUNsaWNrID0gKGV2dCkgPT4ge1xuICAgIC8vICAgbGV0IHRhcmdldCA9IGV2dC50YXJnZXQ7XG4gICAgLy8gICBsZXQgaWR4ID0gK3RhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKTtcblxuICAgIC8vICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGVsLWNob2ljZV9fYnJhbmQtaXRlbScpKSB7XG4gICAgLy8gICAgIGlmIChjdXJyZW50QnJhbmRJZHggPT09IGlkeCkge1xuICAgIC8vICAgICAgIGJyYW5kTGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG4gICAgLy8gICAgICAgYnJhbmRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkJyk7XG4gICAgLy8gICAgIH1cblxuICAgIC8vICAgICBpZiAoY3VycmVudEJyYW5kSWR4ICE9PSBpZHgpIHtcbiAgICAvLyAgICAgICBzZXJpZXNMaXN0LmlubmVySFRNTCA9ICcnO1xuXG4gICAgLy8gICAgICAgc2VyaWVzQnV0dG9uLnRleHRDb250ZW50ID0gJ9CS0YvQsdGA0LDRgtGMINC40Lcg0YHQv9C40YHQutCwJztcbiAgICAvLyAgICAgICBzZXJpZXNCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcblxuICAgIC8vICAgICAgIGxldCBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAvLyAgICAgICBsZXQgaWR4ID0gK3RhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKTtcblxuICAgIC8vICAgICAgIGFycltpZHhdLnNlcmllcy5mb3JFYWNoKChzZXJpZSkgPT4ge1xuICAgIC8vICAgICAgICAgbGV0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgIC8vICAgICAgICAgbm9kZS50ZXh0Q29udGVudCA9IHNlcmllWyd0aXRsZSddO1xuICAgIC8vICAgICAgICAgbm9kZS5jbGFzc0xpc3QuYWRkKCdtb2RlbC1jaG9pY2VfX3Nlcmllcy1pdGVtJyk7XG4gICAgLy8gICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAvLyAgICAgICB9KTtcblxuICAgIC8vICAgICAgIHNlcmllc0xpc3QuYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICAgIC8vICAgICAgIGN1cnJlbnRCcmFuZElkeCA9IGlkeDtcblxuICAgIC8vICAgICAgIGJyYW5kQnV0dG9uLnRleHRDb250ZW50ID0gdGFyZ2V0LnRleHRDb250ZW50O1xuICAgIC8vICAgICAgIGJyYW5kTmFtZSA9IHRhcmdldC50ZXh0Q29udGVudDtcbiAgICAvLyAgICAgICBpZiAoIWJyYW5kQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgIC8vICAgICAgICAgYnJhbmRCdXR0b24uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAvLyAgICAgICB9XG5cbiAgICAvLyAgICAgICBpZiAoc2VyaWVzQnV0dG9uLmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSkge1xuICAgIC8vICAgICAgICAgc2VyaWVzQnV0dG9uLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICAvLyAgICAgICB9XG5cbiAgICAvLyAgICAgICBicmFuZExpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgIC8vICAgICAgIGJyYW5kQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW5lZCcpO1xuXG4gICAgLy8gICAgICAgbGluay5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xuICAgIC8vICAgICAgIGxpbmsucmVtb3ZlQXR0cmlidXRlKCdocmVmJyk7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgIH1cbiAgICAvLyB9XG5cbiAgICAvLyBjb25zdCBvbkJyYW5kQ2hhbmdlID0gKGV2dCkgPT4ge1xuICAgIC8vICAgY3VycmVudE9wdGlvbklkeCA9IGV2dC50YXJnZXQuc2VsZWN0ZWRJbmRleCAtIDE7XG4gICAgLy8gICBzZXJpZXNTZWxlY3QuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAvLyAgIHNlcmllc0J1dHRvbi50ZXh0Q29udGVudCA9ICfQktGL0LHRgNCw0YLRjCDQuNC3INGB0L/QuNGB0LrQsCc7XG4gICAgLy8gICBzZXJpZXNCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKTtcblxuICAgIC8vICAgbGV0IG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcbiAgICAvLyAgIG5vZGUudGV4dENvbnRlbnQgPSAnJztcbiAgICAvLyAgIG5vZGUuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICcnKTtcbiAgICAvLyAgIG5vZGUuc2V0QXR0cmlidXRlKCdzZWxlY3RlZCcsICcnKTtcbiAgICAvLyAgIG5vZGUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgIC8vICAgc2VyaWVzU2VsZWN0LmFwcGVuZENoaWxkKG5vZGUpO1xuXG4gICAgLy8gICBsZXQgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICAvLyAgIGlmIChzZXJpZXNTZWxlY3QuaGFzQXR0cmlidXRlKCdkaXNhYmxlZCcpKSB7XG4gICAgLy8gICAgIHNlcmllc1NlbGVjdC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgLy8gICB9XG5cblxuICAgIC8vICAgYXJyW2N1cnJlbnRPcHRpb25JZHhdLnNlcmllcy5mb3JFYWNoKChzZXJpZSkgPT4ge1xuICAgIC8vICAgICBsZXQgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgIC8vICAgICBub2RlLnRleHRDb250ZW50ID0gc2VyaWVbJ3RpdGxlJ107XG4gICAgLy8gICAgIG5vZGUuY2xhc3NMaXN0LmFkZCgnbW9kZWwtY2hvaWNlX19zZXJpZXMtb3B0aW9uJyk7XG4gICAgLy8gICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKG5vZGUpO1xuICAgIC8vICAgfSk7XG5cbiAgICAvLyAgIHNlcmllc1NlbGVjdC5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG5cbiAgICAvLyAgIGJyYW5kQnV0dG9uLnRleHRDb250ZW50ID0gZXZ0LnRhcmdldC52YWx1ZTtcbiAgICAvLyAgIGJyYW5kTmFtZSA9IGV2dC50YXJnZXQudmFsdWU7XG4gICAgLy8gICBpZiAoIWJyYW5kQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgIC8vICAgICBicmFuZEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xuICAgIC8vICAgfVxuXG4gICAgLy8gICBsaW5rLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XG4gICAgLy8gICBsaW5rLnJlbW92ZUF0dHJpYnV0ZSgnaHJlZicpO1xuICAgIC8vIH1cblxuICAgIC8vIGNvbnN0IG9uU2VyaWVzSXRlbUNsaWNrID0gKGV2dCkgPT4ge1xuICAgIC8vICAgbGV0IHRhcmdldCA9IGV2dC50YXJnZXQ7XG5cbiAgICAvLyAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RlbC1jaG9pY2VfX3Nlcmllcy1pdGVtJykpIHtcbiAgICAvLyAgICAgc2VyaWVzQnV0dG9uLnRleHRDb250ZW50ID0gdGFyZ2V0LnRleHRDb250ZW50O1xuICAgIC8vICAgICBpZiAoIXNlcmllc0J1dHRvbi5jbGFzc0xpc3QuY29udGFpbnMoJ3NlbGVjdGVkJykpIHtcbiAgICAvLyAgICAgICBzZXJpZXNCdXR0b24uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAvLyAgICAgfVxuXG4gICAgLy8gICAgIHNlcmllc0xpc3QuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuICAgIC8vICAgICBzZXJpZXNCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkJyk7XG5cbiAgICAvLyAgICAgbGluay5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xuICAgIC8vICAgICBzZXJpZXNOYW1lID0gdGFyZ2V0LnRleHRDb250ZW50O1xuICAgIC8vICAgICBsaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsIGdldEhyZWYoc2VyaWVzTmFtZSkpO1xuICAgIC8vICAgfVxuICAgIC8vIH1cblxuICAgIC8vIGNvbnN0IG9uU2VyaWVzQ2hhbmdlID0gKGV2dCkgPT4ge1xuICAgIC8vICAgc2VyaWVzQnV0dG9uLnRleHRDb250ZW50ID0gZXZ0LnRhcmdldC52YWx1ZTtcbiAgICAvLyAgIGlmICghc2VyaWVzQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygnc2VsZWN0ZWQnKSkge1xuICAgIC8vICAgICBzZXJpZXNCdXR0b24uY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcbiAgICAvLyAgIH1cblxuICAgIC8vICAgbGluay5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xuICAgIC8vICAgc2VyaWVzTmFtZSA9IGV2dC50YXJnZXQudmFsdWU7XG4gICAgLy8gICBsaW5rLnNldEF0dHJpYnV0ZSgnaHJlZicsIGdldEhyZWYoc2VyaWVzTmFtZSkpO1xuICAgIC8vIH1cblxuICAgIC8vIGNvbnN0IG9uTGlua0NsaWNrID0gKGV2dCkgPT4ge1xuICAgIC8vICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgLy8gICBsZXQgaHJlZiA9IGV2dC50YXJnZXQuZ2V0QXR0cmlidXRlKCdocmVmJyk7XG5cbiAgICAvLyAgIGlmIChocmVmID09PSAnJykge1xuICAgIC8vICAgICBhbGVydCgn0JjQvdGB0YLRgNGD0LrRhtC40Y8g0L/QviDRg9GB0YLQsNC90L7QstC60LUgV2ktRmkg0LrQvtC90YLRgNC+0LvQu9C10YDQsCDQtNC70Y8g0LTQsNC90L3QvtC5INGB0LXRgNC40Lgg0LrQvtC90LTQuNGG0LjQvtC90LXRgNCwINCyINGB0LrQvtGA0L7QvCDQstGA0LXQvNC10L3QuCDQv9C+0Y/QstC40YLRgdGPLicpO1xuXG4gICAgLy8gICAgIHJldHVybjtcbiAgICAvLyAgIH1cblxuICAgIC8vICAgZG9jdW1lbnQubG9jYXRpb24uaHJlZiA9IGhyZWY7XG4gICAgLy8gfTtcblxuICAgIC8vbGV0IHNwbGl0c0RhdGEgPSBiYWNrZW5kLmxvYWQoZ2V0RGF0YSk7XG5cbiAgICAvL2JyYW5kU2VsZWN0LmFwcGVuZENoaWxkKG1ha2VPcHRpb25Ob2RlKHNwbGl0cykpO1xuICAgIC8vbWFrZU9wdGlvbk5vZGUoc3BsaXRzKTtcbiAgICAvL2JhY2tlbmQubG9hZChtYWtlT3B0aW9uTm9kZSk7XG5cblxuICAgIC8vIG1ha2VTZWxlY3QoYnJhbmRDbGFzcyk7XG4gICAgLy8gbWFrZVNlbGVjdChzZXJpZXNDbGFzcyk7XG5cbiAgICAvLyBqUXVlcnkoYnJhbmRDbGFzcykuc2VsZWN0Mignb3BlbicpO1xuICAgIC8vIGpRdWVyeShicmFuZENsYXNzKS5zZWxlY3QyKCdjbG9zZScpO1xuXG5cbiAgICAvLyBjb25zdCBzZXJpZXNTZWxlY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vZGVsLWNob2ljZV9fc2VyaWVzLXNlbGVjdCcpO1xuXG5cbiAgICAvLyBjb25zdCBoaWRlU2VyaWVzID0gKCkgPT4ge1xuICAgIC8vICAgc2VyaWVzU2VsZWN0cy5mb3JFYWNoKChzZWxlY3QpID0+IHtcbiAgICAvLyAgICAgaWYgKCFzZWxlY3QuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgIC8vICAgICAgIHNlbGVjdC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAvLyAgICAgICBzZWxlY3QucmVtb3ZlQXR0cmlidXRlKCdpZCcpO1xuICAgIC8vICAgICB9XG4gICAgLy8gICB9KVxuICAgIC8vIH07XG5cbiAgICAvLyBjb25zdCBzaG93U2VyaWVzID0gKGlkeCkgPT4ge1xuICAgIC8vICAgc2VyaWVzU2VsZWN0c1tpZHhdLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIC8vICAgc2VyaWVzU2VsZWN0c1tpZHhdLnNldEF0dHJpYnV0ZSgnaWQnLCAnc2VyaWVzLXNlbGVjdCcpO1xuICAgIC8vIH07XG5cbiAgICAvLyBqUXVlcnkoYnJhbmRDbGFzcykub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAvLyAgIGxldCBpZHggPSAralF1ZXJ5KCcubW9kZWwtY2hvaWNlX19icmFuZC1zZWxlY3Qgb3B0aW9uOnNlbGVjdGVkJykuYXR0cignZGF0YS1pZCcpO1xuXG4gICAgLy8gICBoaWRlU2VyaWVzKCk7XG4gICAgLy8gICBzaG93U2VyaWVzKGlkeCArIDEpO1xuXG4gICAgLy8gICBqUXVlcnkoJyNzZXJpZXMtc2VsZWN0Jykuc2VsZWN0Mignb3BlbicpO1xuICAgIC8vICAgalF1ZXJ5KCcjc2VyaWVzLXNlbGVjdCcpLnNlbGVjdDIoJ2Nsb3NlJyk7XG5cbiAgICAvLyAgIGpRdWVyeSgnLm1vZGVsLWNob2ljZV9fYnJhbmQtc2VsZWN0JykuYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgLy8gICBqUXVlcnkoJy5tb2RlbC1jaG9pY2VfX3Nlcmllcy1zZWxlY3QnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAvLyB9KTtcblxuICAgIC8vIGpRdWVyeShzZXJpZXNDbGFzcykub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChldnQpIHtcbiAgICAvLyAgIGlmIChsaW5rLmNsYXNzTGlzdC5jb250YWlucygnZGlzYWJsZWQnKSkge1xuICAgIC8vICAgICBsaW5rLmNsYXNzTGlzdC5yZW1vdmUoJ2Rpc2FibGVkJyk7XG4gICAgLy8gICB9XG5cbiAgICAvLyAgIGxldCB2YWx1ZSA9IGpRdWVyeShldnQudGFyZ2V0KS5jaGlsZHJlbignb3B0aW9uOnNlbGVjdGVkJykudGV4dCgpO1xuICAgIC8vICAgc2VyaWVzTmFtZSA9IHZhbHVlO1xuXG5cbiAgICAvLyAgIGxpbmsuc2V0QXR0cmlidXRlKCdocmVmJywgc2VyaWVzTmFtZSk7XG5cbiAgICAvLyAgIGpRdWVyeSgnLm1vZGVsLWNob2ljZV9fc2VyaWVzLXNlbGVjdCcpLmFkZENsYXNzKCdzZWxlY3RlZCcpO1xuICAgIC8vIH0pO1xuXG4gICAgLy9SZXNpemUuaW5pdCgpO1xuICAgIC8vUmVzaXplLmFkZExpc3RlbmVyKCk7XG5cbiAgICBicmFuZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQnJhbmRDbGljayk7XG4gICAgLy9zZXJpZXNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvblNlcmllc0NsaWNrKTtcbiAgICAvLyBicmFuZExpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkJyYW5kSXRlbUNsaWNrKTtcbiAgICAvLyBzZXJpZXNMaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25TZXJpZXNJdGVtQ2xpY2spO1xuICAgIC8vIGJyYW5kU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIG9uQnJhbmRDaGFuZ2UpO1xuICAgIC8vIHNlcmllc1NlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBvblNlcmllc0NoYW5nZSk7XG4gICAgLy8gbGluay5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uTGlua0NsaWNrKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBvbk91dHNpZGVDbGljayk7XG5cblxuICAvL2JhY2tlbmQubG9hZChtYWtlT3B0aW9uTm9kZSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24gKCkge1xuICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVxdWlwbWVudF9fd3JhcHBlcicpO1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZXF1aXBtZW50X19jb250YWluZXInKTtcblxuICBpZighd3JhcHBlcikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGluaXRTd2lwZXIgPSAoKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBTd2lwZXIoJy5lcXVpcG1lbnRfX2NvbnRhaW5lcicsIHtcbiAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgZWw6ICcuZXF1aXBtZW50X19wYWdpbmF0aW9uJyxcbiAgICAgICAgdHlwZTogJ2J1bGxldHMnLFxuICAgICAgfSxcbiAgICAgIGxvb3A6IHRydWUsXG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgYWRkU2xpZGVDbGFzcyA9IChlbGVtZW50KSA9PiB7XG4gICAgbGV0IGl0ZW1zID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZXF1aXBtZW50X19pdGVtJyk7XG4gICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKCdzd2lwZXItc2xpZGUnKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCByZW5kZXJTbGlkZXIgPSAoKSA9PiB7XG4gICAgbGV0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gICAgbGV0IHdyYXBwZXJOb2RlID0gd3JhcHBlci5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgd3JhcHBlck5vZGUuY2xhc3NOYW1lID0gJ2VxdWlwbWVudF9fc2xpZGUtd3JhcHBlcic7XG4gICAgd3JhcHBlck5vZGUuY2xhc3NMaXN0LmFkZCgnc3dpcGVyLXdyYXBwZXInKTtcblxuICAgIGxldCBwYWdpbmF0aW9uTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHBhZ2luYXRpb25Ob2RlLmNsYXNzTGlzdC5hZGQoJ2VxdWlwbWVudF9fcGFnaW5hdGlvbicpO1xuICAgIHBhZ2luYXRpb25Ob2RlLmNsYXNzTGlzdC5hZGQoJ3N3aXBlci1wYWdpbmF0aW9uJyk7XG5cbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZCh3cmFwcGVyTm9kZSk7XG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQocGFnaW5hdGlvbk5vZGUpO1xuXG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbiAgICBhZGRTbGlkZUNsYXNzKGNvbnRhaW5lcik7XG5cbiAgICBpbml0U3dpcGVyKCk7XG4gIH07XG5cbiAgcmVuZGVyU2xpZGVyKCk7XG59KSgpO1xuIiwiKGZ1bmN0aW9uICgpIHtcbiAgY29uc3Qgd3JhcHBlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9jZXNzX193cmFwcGVyJyk7XG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9jZXNzX19jb250YWluZXInKTtcblxuICBpZiAoIXdyYXBwZXIpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBpbml0U3dpcGVyID0gKCkgPT4ge1xuICAgIHJldHVybiBuZXcgU3dpcGVyKCcucHJvY2Vzc19fY29udGFpbmVyJywge1xuICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICBlbDogJy5wcm9jZXNzX19wYWdpbmF0aW9uJyxcbiAgICAgICAgdHlwZTogJ2J1bGxldHMnLFxuICAgICAgfSxcbiAgICAgIGxvb3A6IHRydWUsXG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgYWRkU2xpZGVDbGFzcyA9IChlbGVtZW50KSA9PiB7XG4gICAgbGV0IGl0ZW1zID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvY2Vzc19faXRlbScpO1xuICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGl0ZW0uY2xhc3NMaXN0LmFkZCgnc3dpcGVyLXNsaWRlJyk7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgYWRkTnVtYmVyaW5nID0gKHN3aXBlcikgPT4ge1xuICAgIGNvbnN0IG51bWJlckZpZWxkID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5wcm9jZXNzX19udW1iZXInKTtcblxuICAgIHN3aXBlci5vbignc2xpZGVDaGFuZ2UnLCAoKSA9PiB7XG4gICAgICBudW1iZXJGaWVsZC50ZXh0Q29udGVudCA9IHN3aXBlci5yZWFsSW5kZXggKyAxO1xuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IHJlbmRlclNsaWRlciA9ICgpID0+IHtcbiAgICBsZXQgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICBsZXQgd3JhcHBlck5vZGUgPSB3cmFwcGVyLmNsb25lTm9kZSh0cnVlKTtcbiAgICB3cmFwcGVyTm9kZS5jbGFzc05hbWUgPSAncHJvY2Vzc19fc2xpZGUtd3JhcHBlcic7XG4gICAgd3JhcHBlck5vZGUuY2xhc3NMaXN0LmFkZCgnc3dpcGVyLXdyYXBwZXInKTtcblxuICAgIGxldCBwYWdpbmF0aW9uTm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHBhZ2luYXRpb25Ob2RlLmNsYXNzTGlzdC5hZGQoJ3Byb2Nlc3NfX3BhZ2luYXRpb24nKTtcbiAgICBwYWdpbmF0aW9uTm9kZS5jbGFzc0xpc3QuYWRkKCdzd2lwZXItcGFnaW5hdGlvbicpO1xuXG4gICAgbGV0IG51bWJlck5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBudW1iZXJOb2RlLmNsYXNzTmFtZSA9ICdwcm9jZXNzX19udW1iZXInO1xuICAgIG51bWJlck5vZGUudGV4dENvbnRlbnQgPSAxO1xuXG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQod3JhcHBlck5vZGUpO1xuICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHBhZ2luYXRpb25Ob2RlKTtcbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZChudW1iZXJOb2RlKTtcblxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChmcmFnbWVudCk7XG4gICAgYWRkU2xpZGVDbGFzcyhjb250YWluZXIpO1xuXG4gICAgY29uc3QgcHJvY2Vzc1N3aXBlciA9IGluaXRTd2lwZXIoKTtcbiAgICBhZGROdW1iZXJpbmcocHJvY2Vzc1N3aXBlcik7XG4gIH07XG5cbiAgcmVuZGVyU2xpZGVyKCk7XG59KSgpO1xuIl19
